<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#SheBuildsOnAWS AR Poster Game</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <h1>#SheBuildsOnAWS</h1>
            <p>Point your camera at the AR poster to begin!</p>
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Game UI Overlay -->
    <div id="game-ui" class="hidden">
        <div id="question-panel" class="hidden">
            <h2 id="question-text"></h2>
            <div id="score">Score: <span id="score-value">0</span>/3</div>
        </div>
        
        <div id="completion-panel" class="hidden">
            <h2>ðŸŽ‰ Congratulations!</h2>
            <p>You are a Cloud Builder!</p>
            <button id="selfie-btn">Take AR Selfie ðŸ“¸</button>
            <button id="restart-btn">Play Again</button>
        </div>

        <div id="instructions" class="hidden">
            <p>Tap the correct AWS service to answer the question!</p>
        </div>
    </div>

    <!-- AR Scene -->
    <a-scene
        id="ar-scene"
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true;"
        loading-screen="enabled: false">
        
        <!-- Assets -->
        <a-assets>
            <!-- 3D Models - Replace these URLs with your actual model files -->
            <a-asset-item id="avatar-model" src="assets/models/avatar.glb"></a-asset-item>
            <a-asset-item id="cloud-model" src="assets/models/cloud.glb"></a-asset-item>
            
            <!-- Textures -->
            <img id="s3-icon" src="assets/icons/s3-icon.png">
            <img id="lambda-icon" src="assets/icons/lambda-icon.png">
            <img id="ec2-icon" src="assets/icons/ec2-icon.png">
            <img id="confetti-texture" src="assets/textures/confetti.png">
        </a-assets>

        <!-- AR Marker - Replace 'hiro' with your custom marker -->
        <a-marker preset="hiro" id="main-marker">
            <!-- Background Cloud Environment -->
            <a-entity id="cloud-environment">
                <!-- Animated Clouds -->
                <a-box 
                    id="cloud1"
                    position="-2 1 0" 
                    scale="0.5 0.3 0.5" 
                    color="#87CEEB" 
                    opacity="0.7"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 20000">
                </a-box>
                <a-box 
                    id="cloud2"
                    position="2 1.5 -1" 
                    scale="0.7 0.4 0.7" 
                    color="#B0E0E6" 
                    opacity="0.6"
                    animation="property: rotation; to: 0 -360 0; loop: true; dur: 25000">
                </a-box>
                <a-box 
                    id="cloud3"
                    position="0 2 -2" 
                    scale="0.6 0.35 0.6" 
                    color="#E0F6FF" 
                    opacity="0.8"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 30000">
                </a-box>
            </a-entity>

            <!-- Avatar (Replace with actual 3D model) -->
            <a-cylinder 
                id="avatar"
                position="0 0.5 0" 
                radius="0.3" 
                height="1" 
                color="#FF6B9D"
                visible="false"
                animation__appear="property: scale; from: 0 0 0; to: 1 1 1; dur: 1000; easing: easeOutBounce">
                <!-- Avatar Face -->
                <a-sphere position="0 0.7 0" radius="0.2" color="#FFDBAC"></a-sphere>
                <!-- Cape -->
                <a-plane position="0 0.3 -0.35" width="0.8" height="0.6" color="#4A90E2" rotation="10 0 0"></a-plane>
            </a-cylinder>

            <!-- AWS Service Icons (Interactive Game Elements) -->
            <a-entity id="game-icons" visible="false">
                <!-- S3 Icon -->
                <a-plane 
                    id="s3-service"
                    class="service-icon"
                    position="-1.5 1 0" 
                    width="0.8" 
                    height="0.8" 
                    src="#s3-icon"
                    data-service="s3"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 10000"
                    raycaster-target>
                    <a-text 
                        value="S3" 
                        position="0 -0.6 0" 
                        align="center" 
                        color="#FF6B9D"
                        scale="0.8 0.8 0.8">
                    </a-text>
                </a-plane>

                <!-- Lambda Icon -->
                <a-plane 
                    id="lambda-service"
                    class="service-icon"
                    position="0 1.5 0" 
                    width="0.8" 
                    height="0.8" 
                    src="#lambda-icon"
                    data-service="lambda"
                    animation="property: rotation; to: 0 -360 0; loop: true; dur: 12000"
                    raycaster-target>
                    <a-text 
                        value="Lambda" 
                        position="0 -0.6 0" 
                        align="center" 
                        color="#FF6B9D"
                        scale="0.8 0.8 0.8">
                    </a-text>
                </a-plane>

                <!-- EC2 Icon -->
                <a-plane 
                    id="ec2-service"
                    class="service-icon"
                    position="1.5 1 0" 
                    width="0.8" 
                    height="0.8" 
                    src="#ec2-icon"
                    data-service="ec2"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 8000"
                    raycaster-target>
                    <a-text 
                        value="EC2" 
                        position="0 -0.6 0" 
                        align="center" 
                        color="#FF6B9D"
                        scale="0.8 0.8 0.8">
                    </a-text>
                </a-plane>
            </a-entity>

            <!-- Confetti Effect -->
            <a-entity id="confetti-system" visible="false">
                <a-entity 
                    id="confetti"
                    particle-system="preset: snow; particleCount: 100; color: #FF6B9D,#4A90E2,#FFD700; size: 0.1,0.2">
                </a-entity>
            </a-entity>

            <!-- Badge Display -->
            <a-plane 
                id="badge"
                position="0 2.5 0" 
                width="2" 
                height="1" 
                color="#FFD700"
                visible="false"
                animation__badge="property: scale; from: 0 0 0; to: 1 1 1; dur: 1500; easing: easeOutBounce">
                <a-text 
                    value="ðŸ† Cloud Builder!" 
                    position="0 0 0.01" 
                    align="center" 
                    color="#4A90E2"
                    scale="1.2 1.2 1.2">
                </a-text>
            </a-plane>
        </a-marker>

        <!-- Camera with Raycaster for Touch Interaction -->
        <a-entity camera>
            <a-cursor 
                id="cursor"
                animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                animation__fusing="property: scale; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
                raycaster="objects: .service-icon"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                material="color: #FF6B9D; shader: flat">
            </a-cursor>
        </a-entity>
    </a-scene>

    <!-- Game Logic Script -->
    <script src="game-logic.js"></script>
</body>
</html>
